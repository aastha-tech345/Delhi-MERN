"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[5703,6940],{26940:(e,l,a)=>{a.r(l),a.d(l,{default:()=>n});a(65043);var o=a(31899),s=a.n(o),c=(a(25015),a(70579));const n=e=>{let{onChange:l,selected:a,placeholderText:o}=e;return(0,c.jsx)("div",{children:(0,c.jsx)(s(),{className:"form-control form-search-control w-101",placeholderText:o,selected:a,onChange:e=>{var a,o;let s=null===e||void 0===e||null===(a=e.getFullYear())||void 0===a?void 0:a.toString();const c=parseInt(null===(o=s)||void 0===o?void 0:o.substring(0,4),10);var n;s.length>4&&(s=null===(n=s)||void 0===n?void 0:n.substring(0,4));const t=new Date("".concat(c,".").concat((null===e||void 0===e?void 0:e.getMonth())+1,".").concat(null===e||void 0===e?void 0:e.getDate()));l(t)},onChangeRaw:e=>{var l;let a=e.target.value,o="";a=null===(l=a)||void 0===l?void 0:l.replace(/\D/g,"");for(let c=0;c<(null===(s=a)||void 0===s?void 0:s.length);c++){var s;2!==c&&4!==c||(o+="."),o+=a[c]}e.target.value=o},dateFormat:"dd.MM.yyyy",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select"})})}},35703:(e,l,a)=>{a.r(l),a.d(l,{default:()=>m});var o=a(65043),s=a(47503),c=(a(92342),a(8124)),n=a(73216),t=a(64395),r=a(26940),i=a(70579);const d=()=>{var e;const[l,a]=(0,o.useState)([]);let d=localStorage.getItem("customerRecord"),m=JSON.parse(d);const u=(0,n.Zp)(),v="http://95.217.77.208:4142",[h,x]=(0,o.useState)([]),[g,b]=(0,o.useState)([]),[p,j]=(0,o.useState)(null===l||void 0===l?void 0:l.colleague),[N,f]=(0,o.useState)(null===l||void 0===l?void 0:l.invoiceDate),[y,w]=(0,o.useState)(null===l||void 0===l?void 0:l.deliveryDate),[k,S]=(0,o.useState)(null===l||void 0===l?void 0:l.product),[_,D]=(0,o.useState)(null===l||void 0===l?void 0:l.paymentMethod),[P,C]=(0,o.useState)(null===l||void 0===l?void 0:l.invoiceAmount);let M=null===g||void 0===g||null===(e=g.customerDelivery)||void 0===e?void 0:e.alreadyPaid;const[R,V]=(0,o.useState)(M),A=[{value:"payPal",label:"PayPal"},{value:"barzahlung",label:"Barzahlung"},{value:"rechnung",label:"Rechnung"},{value:"klarna",label:"Klarna"},{value:"kreditkarte",label:"Kreditkarte (f\xfcr die Zukunft)"},{value:"andere",label:"Andere"}],F=[{value:"HVD-PV",label:"HVD-PV"},{value:"Vortrag",label:"Vortrag"},{value:"SPV",label:"SPV"},{value:"OPV",label:"OPV"}];return(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(v,"/invoice/get_invoice/").concat(m._id)),l=await e.json();a(l)}catch(e){console.error("Error fetching customer record:",e)}})(),(async()=>{try{const e=await fetch("".concat(v,"/customer/get_record/").concat(m._id)),l=await e.json();b(l)}catch(e){console.error("Error fetching employee data:",e)}})(),(async()=>{try{const e=await fetch("".concat(v,"/user/get/employeeData"));if(!e.ok)throw new Error("HTTP error! Status: ".concat(e.status));const{data:l}=await e.json();x(l)}catch(e){console.error("Error fetching employee data:",e)}})(),V(M)}),[M]),(0,o.useEffect)((()=>{j(null===l||void 0===l?void 0:l.colleague),f(null===l||void 0===l?void 0:l.invoiceDate),w(null===l||void 0===l?void 0:l.deliveryDate),S(null===l||void 0===l?void 0:l.product),D(null===l||void 0===l?void 0:l.paymentMethod),C(null===l||void 0===l?void 0:l.invoiceAmount)}),[l]),(0,i.jsx)("div",{className:"inner-page-wrap",children:(0,i.jsxs)("div",{style:{background:"#fff"},children:[(0,i.jsx)(c.default,{}),(0,i.jsxs)("div",{className:"tab-content",children:[(0,i.jsx)("div",{className:"tab-title",children:(0,i.jsx)("h4",{className:"mx-3",children:"Rechnung"})}),(0,i.jsx)("hr",{className:"mx-3"}),(0,i.jsx)("div",{className:"container-fluid",children:(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col",children:(0,i.jsx)("div",{className:"block-wrap",children:(0,i.jsxs)("div",{className:"container-fluid",children:[(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-sm-6",children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("label",{htmlFor:"product",className:"col-sm-4 col-form-label",children:"Transaktionsnr"}),(0,i.jsx)("div",{className:"col-sm-6",children:(0,i.jsx)("input",{className:"form-control",disabled:!0,placeholder:"Transaktionsnr"})})]})}),(0,i.jsx)("div",{className:"col-sm-6",children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("label",{htmlFor:"product",className:"col-sm-4 col-form-label",children:"Zahlungseingang"}),(0,i.jsx)("div",{className:"col-sm-6",children:(0,i.jsx)("input",{className:"form-control",disabled:!0,placeholder:"Zahlungseingang"})})]})})]}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsxs)("div",{className:"col-sm-6",children:[(0,i.jsxs)("div",{className:"row mb-3",children:[(0,i.jsx)("label",{htmlFor:"product",className:"col-sm-4 col-form-label",children:"Produkt"}),(0,i.jsx)("div",{className:"col-sm-6",children:(0,i.jsx)(t.Ay,{className:"w-100",options:F,onChange:e=>S((null===e||void 0===e?void 0:e.value)||""),value:F.find((e=>e.value===k)),name:"product",placeholder:"HVD-PV"})})]}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("label",{htmlFor:"invoiceAmount",className:"col-sm-4 col-form-label",children:"Rechnungsbetrag eintragen"}),(0,i.jsx)("div",{className:"col-sm-6",children:(0,i.jsx)("input",{type:"text",placeholder:"Rechnungsbetrag eintragen",className:"form-control",name:"invoiceAmount",value:P,onChange:e=>{const l=e.target.value.replace(/\D/g,"");C(l)}})})]}),(0,i.jsxs)("div",{className:"mb-6 row",children:[(0,i.jsx)("label",{htmlFor:"invoiceDate",className:"col-sm-4 col-form-label",children:"Rechnungsdatum"}),(0,i.jsx)("div",{className:"col-sm-6",children:(0,i.jsx)(r.default,{className:"form-control",selected:N,onChange:e=>{f(e)},placeholderText:"Rechnungsdatum"})})]}),(0,i.jsxs)("div",{className:"mb-6 row",children:[(0,i.jsx)("label",{htmlFor:"colleague",className:"col-sm-4 col-form-label",children:"MitarbeiterInnen"}),(0,i.jsx)("div",{className:"col-sm-6",children:(0,i.jsx)(t.Ay,{className:"w-100",placeholder:"MitarbeiterInnen",options:(null===h||void 0===h?void 0:h.map((e=>({value:e.username,label:e.username}))))||[],onChange:e=>j((null===e||void 0===e?void 0:e.value)||""),value:{value:p||"MitarbeiterInnen",label:p||"MitarbeiterInnen"},name:"colleague"})})]})]}),(0,i.jsxs)("div",{className:"col-sm-6",children:[(0,i.jsxs)("div",{className:"mb-6 row",children:[(0,i.jsx)("label",{htmlFor:"alreadyPaid",className:"col-sm-4 mb-2 col-form-label",children:"Bereits bezahlt"}),(0,i.jsxs)("div",{className:"col-sm-6 radio-check-wrap",children:[(0,i.jsx)("input",{readOnly:!0,type:"checkbox",name:"alreadyPaid",checked:R,onChange:e=>{V(e.target.checked)},onClick:e=>e.stopPropagation()}),(0,i.jsx)("span",{})]})]}),(0,i.jsxs)("div",{className:"row mb-3",children:[(0,i.jsx)("label",{htmlFor:"paymentMethod",className:"col-sm-4 col-form-label",children:"Zahlungsart"}),(0,i.jsx)("div",{className:"col-sm-6",children:(0,i.jsx)(t.Ay,{className:"w-100",options:A,onChange:e=>D((null===e||void 0===e?void 0:e.value)||""),value:A.find((e=>e.value===_)),name:"paymentMethod",placeholder:"Barzahlung"})})]}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("label",{htmlFor:"deliveryDate",className:"col-sm-4 col-form-label",children:"Lieferdatum"}),(0,i.jsx)("div",{className:"col-sm-6",children:(0,i.jsx)(r.default,{className:"form-control",selected:y,onChange:e=>{w(e)},placeholderText:"Lieferdatum"})})]})]})]})]})})})})}),(0,i.jsxs)("div",{className:"text-end mx-3",children:[(0,i.jsx)("button",{type:"button",onClick:()=>{localStorage.removeItem("customerRecord"),u("/customer/customer_info")},className:"btn btn",style:{background:"#d04545",color:"white"},children:"Abbrechen"}),"\xa0 \xa0",(0,i.jsx)("button",{onClick:async()=>{try{const e={product:k,alreadyPaid:R,paymentMethod:_,invoiceAmount:P,invoiceDate:N,deliveryDate:y,employeeData:h,colleague:p,customer_id:null===m||void 0===m?void 0:m._id},l=await fetch("".concat(v,"/invoice/get_invoice/").concat(null===m||void 0===m?void 0:m._id),{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!l.ok)throw new Error("HTTP error! Status: ".concat(l.status));s.oR.success("Rechnungsdaten erfolgreich gespeichert")}catch(e){s.oR.error("Bitte f\xfcllen Sie alle Angaben aus")}},type:"button",style:{background:"#0b5995",color:"white"},className:"btn btn",children:"Speichern"})]}),(0,i.jsx)("br",{}),(0,i.jsx)(s.N9,{})]})]})})},m=o.memo(d)}}]);
//# sourceMappingURL=5703.8da153e3.chunk.js.map