"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[7893,6940],{26940:(e,a,l)=>{l.r(a),l.d(a,{default:()=>s});var r=l(65043),o=l(31899),t=l.n(o),n=(l(25015),l(70579));const s=e=>{let{onChange:a,selected:l,placeholderText:o}=e;return(0,r.useEffect)((()=>{}),[]),(0,n.jsx)("div",{children:(0,n.jsx)(t(),{className:"form-control form-search-control w-101",placeholderText:o,selected:l,onChange:a,dateFormat:"dd.MM.yyyy"})})}},87893:(e,a,l)=>{l.r(a),l.d(a,{default:()=>m});var r=l(65043),o=l(47503),t=(l(92342),l(8124)),n=l(73216),s=l(26940),h=(l(48555),l(15935),l(17195)),i=l.n(h),d=l(70579);const c=()=>{var e,a,l,h,c,m,v,u;const[p,x]=(0,r.useState)([]),j=(0,n.Zp)(),C="http://95.217.77.208:4142",[f,_]=(0,r.useState)({AttorneyMasterData:!1,adoptDataFromHealthcare:Boolean(null===p||void 0===p||null===(e=p.powerOfAttorney)||void 0===e?void 0:e.adoptDataFromHealthcare),powerOfAttorneyData:Array.from({length:4},(()=>{var e,a,l,r,o,t,n,s,h,i;return{powerOfAttorney_fname:null===p||void 0===p||null===(e=p.healthCare)||void 0===e||null===(a=e.healthCareData)||void 0===a?void 0:a.map((e=>e.healthCare_fname)),powerOfAttorney_lname:null===p||void 0===p||null===(l=p.healthCare)||void 0===l||null===(r=l.healthCareData)||void 0===r?void 0:r.map((e=>e.healthCare_lname)),powerOfAttorney_address:null===p||void 0===p||null===(o=p.healthCare)||void 0===o||null===(t=o.healthCareData)||void 0===t?void 0:t.map((e=>e.healthCare_address)),powerOfAttorney_mobile:null===p||void 0===p||null===(n=p.healthCare)||void 0===n||null===(s=n.healthCareData)||void 0===s?void 0:s.map((e=>e.healthCare_mobile)),powerOfAttorney_phone:null===p||void 0===p||null===(h=p.healthCare)||void 0===h||null===(i=h.healthCareData)||void 0===i?void 0:i.map((e=>e.healthCare_phone))}}))}),[y,N]=(0,r.useState)({care_association:(null===p||void 0===p||null===(a=p.careProvision)||void 0===a?void 0:a.care_association)||""}),[g,w]=(0,r.useState)({fname:(null===p||void 0===p||null===(l=p.securingattorney)||void 0===l?void 0:l.fname)||"",lname:(null===p||void 0===p||null===(h=p.securingattorney)||void 0===h?void 0:h.lname)||"",address:(null===p||void 0===p||null===(c=p.securingattorney)||void 0===c?void 0:c.address)||"",dob:(null===p||void 0===p||null===(m=p.securingattorney)||void 0===m?void 0:m.dob)||"",plz:(null===p||void 0===p||null===(v=p.securingattorney)||void 0===v?void 0:v.plz)||"",ort:(null===p||void 0===p||null===(u=p.securingattorney)||void 0===u?void 0:u.ort)||""}),b=(e,a,l)=>{let r;r=e&&e.target?e.target.value:e,A((e=>{const o=[...e.healthCareData];return o[a]={...o[a],[l]:r},{...e,healthCareData:o}}))},[D,A]=(0,r.useState)({healthCareData:Array.from({length:4},(()=>{var e,a,l,r,o,t,n,s,h,i;return{healthCare_fname:null===p||void 0===p||null===(e=p.healthCare)||void 0===e||null===(a=e.healthCareData)||void 0===a?void 0:a.map((e=>e.healthCare_fname)),healthCare_lname:null===p||void 0===p||null===(l=p.healthCare)||void 0===l||null===(r=l.healthCareData)||void 0===r?void 0:r.map((e=>e.healthCare_lname)),healthCare_address:null===p||void 0===p||null===(o=p.healthCare)||void 0===o||null===(t=o.healthCareData)||void 0===t?void 0:t.map((e=>e.healthCare_address)),healthCare_mobile:null===p||void 0===p||null===(n=p.healthCare)||void 0===n||null===(s=n.healthCareData)||void 0===s?void 0:s.map((e=>e.healthCare_mobile)),healthCare_phone:null===p||void 0===p||null===(h=p.healthCare)||void 0===h||null===(i=h.healthCareData)||void 0===i?void 0:i.map((e=>e.healthCare_phone))}}))}),O=(e,a)=>{const{name:l,value:r,type:o,checked:t}=e.target||{};_((e=>{const n=[...e.powerOfAttorneyData];return n[a]="checkbox"===o?{...n[a],[l]:t}:{...n[a],powerOfAttorney_phone:r,powerOfAttorney_mobile:r},{...e,powerOfAttorneyData:n}}))},S=e=>{if(e instanceof Date){let a=new Date,l=a.getFullYear(),r=a.getMonth(),t=a.getDate();if(e.getFullYear()>l||e.getFullYear()===l&&e.getMonth()>r||e.getFullYear()===l&&e.getMonth()===r&&e.getDate()>t+1)return o.oR.warning("Das Startdatum darf nicht in der Zukunft liegen");w({...g,dob:e})}else if(e.target){const{name:a,value:l,type:r,checked:o}=e.target;if("plz"===a&&"text"===r){const e=l.replace(/[^0-9]/g,"");w({...g,plz:e})}else w({...g,[a]:"checkbox"===r?o:l})}else void 0!==e.value?w({...g,salution:e.value}):console.error("Invalid event or data provided to ContactChange.")};let k=localStorage.getItem("customerRecord"),F=JSON.parse(k);const L={healthCare:D,powerOfAttorney:f,careProvision:y,securingattorney:g,customer_id:null===F||void 0===F?void 0:F._id};return(0,r.useEffect)((()=>{var e,a,l,r,o,t,n;N({care_association:null===p||void 0===p||null===(e=p.careProvision)||void 0===e?void 0:e.care_association}),w({fname:null===p||void 0===p||null===(a=p.securingattorney)||void 0===a?void 0:a.fname,lname:null===p||void 0===p||null===(l=p.securingattorney)||void 0===l?void 0:l.lname,address:null===p||void 0===p||null===(r=p.securingattorney)||void 0===r?void 0:r.address,dob:null===p||void 0===p||null===(o=p.securingattorney)||void 0===o?void 0:o.dob,plz:null===p||void 0===p||null===(t=p.securingattorney)||void 0===t?void 0:t.plz,ort:null===p||void 0===p||null===(n=p.securingattorney)||void 0===n?void 0:n.ort}),_((e=>({...e,powerOfAttorneyData:Array.from({length:4},((a,l)=>({powerOfAttorneyData:e.powerOfAttorneyData.map(((e,a)=>{var l,r,o,t,n,s,h,i,d,c,m,v,u,x,j;return{...e,powerOfAttorney_fname:(null===p||void 0===p||null===(l=p.healthCare)||void 0===l||null===(r=l.healthCareData)||void 0===r||null===(o=r[a])||void 0===o?void 0:o.healthCare_fname)||e.powerOfAttorney_fname,powerOfAttorney_lname:(null===p||void 0===p||null===(t=p.healthCare)||void 0===t||null===(n=t.healthCareData)||void 0===n||null===(s=n[a])||void 0===s?void 0:s.healthCare_lname)||e.powerOfAttorney_lname,powerOfAttorney_address:(null===p||void 0===p||null===(h=p.healthCare)||void 0===h||null===(i=h.healthCareData)||void 0===i||null===(d=i[a])||void 0===d?void 0:d.healthCare_address)||e.powerOfAttorney_address,powerOfAttorney_mobile:(null===p||void 0===p||null===(c=p.healthCare)||void 0===c||null===(m=c.healthCareData)||void 0===m||null===(v=m[a])||void 0===v?void 0:v.healthCare_mobile)||e.powerOfAttorney_mobile,powerOfAttorney_phone:(null===p||void 0===p||null===(u=p.healthCare)||void 0===u||null===(x=u.healthCareData)||void 0===x||null===(j=x[a])||void 0===j?void 0:j.healthCare_phone)||e.powerOfAttorney_phone}}))})))}))),A((e=>({...e,healthCareData:Array.from({length:4},((a,l)=>{var r,o,t,n,s,h,i,d,c,m,v,u,x,j,C,f,_,y,N,g;return{healthCare_fname:(null===p||void 0===p||null===(r=p.healthCare)||void 0===r||null===(o=r.healthCareData)||void 0===o||null===(t=o[l])||void 0===t?void 0:t.healthCare_fname)||(null===(n=e.healthCareData[l])||void 0===n?void 0:n.healthCare_fname)||"",healthCare_lname:(null===p||void 0===p||null===(s=p.healthCare)||void 0===s||null===(h=s.healthCareData)||void 0===h||null===(i=h[l])||void 0===i?void 0:i.healthCare_lname)||(null===(d=e.healthCareData[l])||void 0===d?void 0:d.healthCare_lname)||"",healthCare_address:(null===p||void 0===p||null===(c=p.healthCare)||void 0===c||null===(m=c.healthCareData)||void 0===m||null===(v=m[l])||void 0===v?void 0:v.healthCare_address)||(null===(u=e.healthCareData[l])||void 0===u?void 0:u.healthCare_address)||"",healthCare_mobile:(null===p||void 0===p||null===(x=p.healthCare)||void 0===x||null===(j=x.healthCareData)||void 0===j||null===(C=j[l])||void 0===C?void 0:C.healthCare_mobile)||(null===(f=e.healthCareData[l])||void 0===f?void 0:f.healthCare_mobile)||"",healthCare_phone:(null===p||void 0===p||null===(_=p.healthCare)||void 0===_||null===(y=_.healthCareData)||void 0===y||null===(N=y[l])||void 0===N?void 0:N.healthCare_phone)||(null===(g=e.healthCareData[l])||void 0===g?void 0:g.healthCare_phone)||""}}))})))}),[p,4]),(0,r.useEffect)((()=>{D.healthCareData.length<10&&A((e=>({...e,healthCareData:[...e.healthCareData,{healthCare_fname:"",healthCare_lname:"",healthCare_address:"",healthCare_phone:[]}]}))),(async()=>{try{const e=await fetch("".concat(C,"/attorney/get_attorney/").concat(F._id)),a=await e.json();x(a)}catch(e){console.error("Error fetching customer record:",e)}})(),f.powerOfAttorneyData.length<10&&_((e=>({...e,powerOfAttorneyData:[...e.powerOfAttorneyData,{powerOfAttorney_fname:"",powerOfAttorney_lname:"",powerOfAttorney_address:"",powerOfAttorney_phone:[],powerOfAttorney_mobile:[]}]})))}),[]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(t.default,{}),(0,d.jsxs)("div",{className:"inner-page-wrap",children:[(0,d.jsxs)("div",{className:"tab-content",children:[(0,d.jsx)("div",{className:"tab-title",children:(0,d.jsx)("h4",{children:"Vollmachten"})}),(0,d.jsxs)("div",{className:"block-wrap m-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"row",children:(0,d.jsxs)("div",{className:"col-sm-12",children:[(0,d.jsx)("h3",{style:{color:"#244D92"},children:"Gesundheitsvollmacht"}),(0,d.jsx)("p",{className:"",style:{color:"#244D92"},children:"Bevollm\xe4chtigte Person(en):"}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"row mb-2",children:[(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("b",{children:"Vorname"})}),(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("b",{children:"Nachname"})}),(0,d.jsx)("div",{className:"col-sm-4",children:(0,d.jsx)("b",{children:"Adresse"})}),(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("b",{children:"Telefon"})}),(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("b",{children:"Mobil"})})]}),(0,d.jsx)("div",{children:D.healthCareData&&D.healthCareData.map(((e,a)=>(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-sm-12",children:(0,d.jsx)("input",{onChange:e=>b(e,a,"healthCare_fname"),value:e.healthCare_fname,name:"healthCare_fname",type:"text",placeholder:"Vorname",className:"form-control z",id:"fname_".concat(a)})})})}),(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-sm-12",children:(0,d.jsx)("input",{onChange:e=>b(e,a,"healthCare_lname"),value:e.healthCare_lname,type:"text",name:"healthCare_lname",placeholder:"Nachname",className:"form-control",id:"lname_".concat(a)})})})}),(0,d.jsx)("div",{className:"col-sm-4",children:(0,d.jsx)("div",{className:" row",children:(0,d.jsx)("div",{className:"col-sm-12",children:(0,d.jsx)("input",{onChange:e=>b(e,a,"healthCare_address"),value:e.healthCare_address,type:"text",name:"healthCare_address",placeholder:"Adresse",className:"form-control",id:"address_".concat(a)})})})}),(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("div",{className:" row",children:(0,d.jsx)("div",{className:"col-sm-12",children:(0,d.jsx)(i(),{onChange:e=>b(e,a,"healthCare_phone"),value:String(e.healthCare_phone),name:"healthCare_phone",placeholder:"853-456-8464",inputProps:{id:"phone_".concat(a),maxLength:20,minLength:3}})})})}),(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("div",{className:" row",children:(0,d.jsx)("div",{className:"col-sm-12",children:(0,d.jsx)(i(),{onChange:e=>b(e,a,"healthCare_mobile"),value:String(e.healthCare_mobile),type:"text",name:"healthCare_mobile",placeholder:"853-456-8464",inputProps:{id:"phone_".concat(a),maxLength:20,minLength:3}})})})})]},a)))})]})]})}),(0,d.jsx)("hr",{}),(0,d.jsx)("div",{className:"row",children:(0,d.jsxs)("div",{className:"col-sm-12",children:[(0,d.jsx)("h3",{style:{color:"#244D92"},children:"Vorsorgevollmacht"}),(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("label",{htmlFor:"adoptDataFromHealthcare",className:"col-sm-3 col-form-label",children:"Daten aus Gesundheitsvollmacht \xfcbernehmen"}),(0,d.jsxs)("div",{className:"col-sm-1 radio-check-wrap mt-2",children:[(0,d.jsx)("input",{type:"checkbox",onChange:()=>{_((e=>({...e,adoptDataFromHealthcare:!e.adoptDataFromHealthcare,powerOfAttorneyData:e.adoptDataFromHealthcare?f.powerOfAttorneyData.map((e=>({powerOfAttorney_fname:"",powerOfAttorney_lname:"",powerOfAttorney_address:"",powerOfAttorney_phone:"",powerOfAttorney_mobile:""}))):D.healthCareData.map((e=>({powerOfAttorney_fname:e.healthCare_fname,powerOfAttorney_lname:e.healthCare_lname,powerOfAttorney_address:e.healthCare_address,powerOfAttorney_phone:e.healthCare_phone,powerOfAttorney_mobile:e.healthCare_mobile})))})))},checked:f.adoptDataFromHealthcare,name:"adoptDataFromHealthcare"}),(0,d.jsx)("span",{})]})]}),(0,d.jsx)("p",{className:"",style:{color:"#244D92"},children:"Bevollm\xe4chtigte Person(en):"}),(0,d.jsxs)("div",{className:"row mb-2 mt-3",children:[(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("b",{children:"Vorname"})}),(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("b",{children:"Nachname"})}),(0,d.jsx)("div",{className:"col-sm-4",children:(0,d.jsx)("b",{children:"Adresse"})}),(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("b",{children:"Telefon"})}),(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("b",{children:"Mobil"})})]}),f.powerOfAttorneyData&&f.powerOfAttorneyData.map(((e,a)=>(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-sm-12",children:(0,d.jsx)("input",{onChange:e=>O(e,a),value:e.powerOfAttorney_fname,name:"powerOfAttorney_fname",type:"text",placeholder:"Vorname",className:"form-control"})})})}),(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-sm-12",children:(0,d.jsx)("input",{onChange:e=>O(e,a),value:e.powerOfAttorney_lname,name:"powerOfAttorney_lname",type:"text",placeholder:"Nachname",className:"form-control"})})})}),(0,d.jsx)("div",{className:"col-sm-4",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-sm-12",children:(0,d.jsx)("input",{onChange:e=>O(e,a),value:e.powerOfAttorney_address,name:"powerOfAttorney_address",type:"text",placeholder:"Adresse",className:"form-control"})})})}),(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-sm-12",children:(0,d.jsx)(i(),{onChange:e=>O(e,a),value:String(e.powerOfAttorney_phone),name:"powerOfAttorney_phone",type:"text",placeholder:"853-456-8464",maxLength:20,minLength:3})})})}),(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-sm-12",children:(0,d.jsx)(i(),{onChange:e=>O(e,a),value:String(e.powerOfAttorney_mobile),name:"powerOfAttorney_mobile",type:"text",placeholder:"853-456-8464",maxLength:20,minLength:3})})})})]},a)))]})})]}),(0,d.jsx)("hr",{}),(0,d.jsx)("div",{className:"row",children:(0,d.jsxs)("div",{className:"col-sm-12",children:[(0,d.jsx)("h3",{style:{color:"#244D92"},children:"Betreuungsverf\xfcgung"}),(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("label",{className:"col-sm-2 col-form-label",children:"Betreuungsverein"}),(0,d.jsx)("div",{className:"col-sm-10",children:(0,d.jsx)("textarea",{value:y.care_association,name:"care_association",onChange:e=>{const{name:a,value:l}=e.target;N({...y,[a]:l})},className:"form-control",placeholder:"Betreuungsverein"})})]}),(0,d.jsx)("hr",{})]})}),(0,d.jsx)("div",{className:"row",children:(0,d.jsxs)("div",{className:"col-sm-12",children:[(0,d.jsx)("h3",{style:{color:"#244D92"},children:"Vollmacht zur Absicherung des digitalen Erbes"}),(0,d.jsxs)("div",{className:"row mb-2 mt-3",children:[(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("b",{children:"Vorname"})}),(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("b",{children:"Nachname"})}),(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("b",{children:"Geburtsdatum"})}),(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("b",{children:"Stra\xdfe mit Hausnummer"})}),(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("b",{children:"PLZ"})}),(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("b",{children:"Ort"})})]}),(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-sm-12",children:(0,d.jsx)("input",{onChange:S,name:"fname",value:g.fname,type:"text",placeholder:"Vorname",className:"form-control"})})})}),(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-sm-12",children:(0,d.jsx)("input",{onChange:S,name:"lname",value:g.lname,type:"text",placeholder:"Nachname",className:"form-control"})})})}),(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-sm-12",children:(0,d.jsx)(s.default,{className:"form-control",selected:g.dob,onChange:S,placeholderText:"Geburtsdatum"})})})}),(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-sm-12",children:(0,d.jsx)("input",{onChange:S,value:g.address,name:"address",type:"text",placeholder:"Stra\xdfe mit Hausnummer",className:"form-control"})})})}),(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-sm-12",children:(0,d.jsx)("input",{onChange:S,name:"plz",value:g.plz,type:"text",className:"form-control",placeholder:"PLZ",maxLength:6,minLength:3})})})}),(0,d.jsx)("div",{className:"col-sm-2",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-sm-12",children:(0,d.jsx)("input",{onChange:S,name:"ort",value:g.ort,type:"text",className:"form-control",placeholder:"Ort"})})})})]})]})}),(0,d.jsx)("hr",{}),(0,d.jsxs)("div",{className:"text-end mx-3",children:[(0,d.jsx)("button",{onClick:()=>{localStorage.removeItem("tabId"),j("/customer/customer_info")},type:"button",className:"btn btn",style:{background:"#d04545",color:"white"},children:"Abbrechen"}),"\xa0 \xa0",(0,d.jsx)("button",{onClick:async()=>{const e=L.healthCare.healthCareData,a=/000/;for(const r of e){if(r.healthCare_phone&&r.healthCare_phone.match(a))return o.oR.warning("Ung\xfcltige Telefonnummer");if(r.healthCare_mobile&&r.healthCare_mobile.match(a))return o.oR.warning("Ung\xfcltige Mobilnummer")}try{let e,a;F?(e="".concat(C,"/attorney/get_attorney/").concat(F._id),a="PUT"):(e="".concat(C,"/attorney"),a="POST");let l=await fetch(e,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});201===(await l.json()).status?o.oR.success("Daten erfolgreich gespeichert"):o.oR.error("Fehler beim Speichern der Daten. Weitere Informationen finden Sie auf der Konsole.")}catch(l){o.oR.error("Error saving data. Please try again.")}},type:"button",style:{background:"#0b5995",color:"white"},className:"btn btn",children:"Speichern"})]})]})]}),(0,d.jsx)(o.N9,{})]})]})},m=r.memo(c)}}]);
//# sourceMappingURL=7893.f85eccf5.chunk.js.map