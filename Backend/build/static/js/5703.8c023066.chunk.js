"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[5703,6940],{26940:(e,a,l)=>{l.r(a),l.d(a,{default:()=>t});l(65043);var o=l(31899),c=l.n(o),s=(l(25015),l(70579));const t=e=>{let{onChange:a,selected:l,placeholderText:o}=e;return(0,s.jsx)("div",{children:(0,s.jsx)(c(),{className:"form-control form-search-control w-101",placeholderText:o,selected:l,onChange:a,dateFormat:"dd.MM.yyyy"})})}},35703:(e,a,l)=>{l.r(a),l.d(a,{default:()=>u});var o=l(65043),c=l(47503),s=(l(92342),l(8124)),t=l(73216),n=l(64395),r=l(26940),i=l(70579);const d=()=>{var e;const[a,l]=(0,o.useState)([]);let d=localStorage.getItem("customerRecord"),u=JSON.parse(d);const m=(0,t.Zp)(),h="http://95.217.77.208:4142",[v,b]=(0,o.useState)([]),[x,p]=(0,o.useState)([]),[g,j]=(0,o.useState)(null===a||void 0===a?void 0:a.colleague),[f,y]=(0,o.useState)(null===a||void 0===a?void 0:a.invoiceDate),[N,w]=(0,o.useState)(null===a||void 0===a?void 0:a.deliveryDate),[k,_]=(0,o.useState)(null===a||void 0===a?void 0:a.product),[S,P]=(0,o.useState)(null===a||void 0===a?void 0:a.paymentMethod),[C,D]=(0,o.useState)(null===a||void 0===a?void 0:a.invoiceAmount);let V=null===x||void 0===x||null===(e=x.customerDelivery)||void 0===e?void 0:e.alreadyPaid;const[A,M]=(0,o.useState)(V),R=[{value:"barzahlung",label:"Barzahlung"},{value:"rechnung",label:"Rechnung"},{value:"payPal",label:"PayPal"},{value:"klarna",label:"Klarna"},{value:"kreditkarte",label:"Kreditkarte (f\xfcr die Zukunft)"},{value:"andere",label:"Andere"}],T=[{value:"HVD-PV",label:"HVD-PV"},{value:"Vortrag",label:"Vortrag"},{value:"SPV",label:"SPV"},{value:"OPV",label:"OPV"}];return(0,o.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(h,"/invoice/get_invoice/").concat(u._id)),a=await e.json();l(a)}catch(e){console.error("Error fetching customer record:",e)}})(),(async()=>{try{const e=await fetch("".concat(h,"/customer/get_record/").concat(u._id)),a=await e.json();p(a)}catch(e){console.error("Error fetching employee data:",e)}})(),(async()=>{try{const e=await fetch("".concat(h,"/user/get/employeeData"));if(!e.ok)throw new Error("HTTP error! Status: ".concat(e.status));const{data:a}=await e.json();b(a)}catch(e){console.error("Error fetching employee data:",e)}})(),M(V)}),[V]),(0,o.useEffect)((()=>{j(null===a||void 0===a?void 0:a.colleague),y(null===a||void 0===a?void 0:a.invoiceDate),w(null===a||void 0===a?void 0:a.deliveryDate),_(null===a||void 0===a?void 0:a.product),P(null===a||void 0===a?void 0:a.paymentMethod),D(null===a||void 0===a?void 0:a.invoiceAmount)}),[a]),(0,i.jsx)("div",{className:"inner-page-wrap",children:(0,i.jsxs)("div",{style:{background:"#fff"},children:[(0,i.jsx)(s.default,{}),(0,i.jsxs)("div",{className:"tab-content",children:[(0,i.jsx)("div",{className:"tab-title",children:(0,i.jsx)("h4",{className:"mx-3",children:"Rechnung"})}),(0,i.jsx)("div",{className:"container-fluid",children:(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col",children:(0,i.jsx)("div",{className:"block-wrap",children:(0,i.jsx)("div",{className:"container-fluid",children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsxs)("div",{className:"col-sm-6",children:[(0,i.jsxs)("div",{className:"row mb-3",children:[(0,i.jsx)("label",{htmlFor:"product",className:"col-sm-4 col-form-label",children:"Produkt"}),(0,i.jsx)("div",{className:"col-sm-6",children:(0,i.jsx)(n.Ay,{className:"w-100",options:T,onChange:e=>_((null===e||void 0===e?void 0:e.value)||""),value:T.find((e=>e.value===k)),name:"product",placeholder:"HVD-PV"})})]}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("label",{htmlFor:"invoiceAmount",className:"col-sm-4 col-form-label",children:"Rechnungsbetrag eintragen"}),(0,i.jsx)("div",{className:"col-sm-6",children:(0,i.jsx)("input",{type:"text",placeholder:"Rechnungsbetrag eintragen",className:"form-control",name:"invoiceAmount",value:C,onChange:e=>{const a=e.target.value.replace(/\D/g,"");D(a)}})})]}),(0,i.jsxs)("div",{className:"mb-6 row",children:[(0,i.jsx)("label",{htmlFor:"invoiceDate",className:"col-sm-4 col-form-label",children:"Rechnungsdatum"}),(0,i.jsx)("div",{className:"col-sm-6",children:(0,i.jsx)(r.default,{className:"form-control",selected:f,onChange:e=>{y(e)},placeholderText:"Rechnungsdatum"})})]}),(0,i.jsxs)("div",{className:"mb-6 row",children:[(0,i.jsx)("label",{htmlFor:"colleague",className:"col-sm-4 col-form-label",children:"MitarbeiterInnen"}),(0,i.jsx)("div",{className:"col-sm-6",children:(0,i.jsx)(n.Ay,{className:"w-100",placeholder:"MitarbeiterInnen",options:(null===v||void 0===v?void 0:v.map((e=>({value:e.username,label:e.username}))))||[],onChange:e=>j((null===e||void 0===e?void 0:e.value)||""),value:{value:g||"MitarbeiterInnen",label:g||"MitarbeiterInnen"},name:"colleague"})})]})]}),(0,i.jsxs)("div",{className:"col-sm-6",children:[(0,i.jsxs)("div",{className:"mb-6 row",children:[(0,i.jsx)("label",{htmlFor:"alreadyPaid",className:"col-sm-4 mb-2 col-form-label",children:"Bereits bezahlt"}),(0,i.jsxs)("div",{className:"col-sm-6 radio-check-wrap",children:[(0,i.jsx)("input",{readOnly:!0,type:"checkbox",name:"alreadyPaid",checked:A,onChange:e=>{M(e.target.checked)},onClick:e=>e.stopPropagation()}),(0,i.jsx)("span",{})]})]}),(0,i.jsxs)("div",{className:"row mb-3",children:[(0,i.jsx)("label",{htmlFor:"paymentMethod",className:"col-sm-4 col-form-label",children:"Zahlungsart"}),(0,i.jsx)("div",{className:"col-sm-6",children:(0,i.jsx)(n.Ay,{className:"w-100",options:R,onChange:e=>P((null===e||void 0===e?void 0:e.value)||""),value:R.find((e=>e.value===S)),name:"paymentMethod",placeholder:"Barzahlung"})})]}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("label",{htmlFor:"deliveryDate",className:"col-sm-4 col-form-label",children:"Lieferdatum"}),(0,i.jsx)("div",{className:"col-sm-6",children:(0,i.jsx)(r.default,{className:"form-control",selected:N,onChange:e=>{w(e)},placeholderText:"Lieferdatum"})})]})]})]})})})})})}),(0,i.jsxs)("div",{className:"text-end mx-3",children:[(0,i.jsx)("button",{type:"button",onClick:()=>{localStorage.removeItem("customerRecord"),m("/customer/customer_info")},className:"btn btn",style:{background:"#d04545",color:"white"},children:"Abbrechen"}),"\xa0 \xa0",(0,i.jsx)("button",{onClick:async()=>{try{const e={product:k,alreadyPaid:A,paymentMethod:S,invoiceAmount:C,invoiceDate:f,deliveryDate:N,employeeData:v,colleague:g,customer_id:null===u||void 0===u?void 0:u._id},a=await fetch("".concat(h,"/invoice/get_invoice/").concat(null===u||void 0===u?void 0:u._id),{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok)throw new Error("HTTP error! Status: ".concat(a.status));c.oR.success("Rechnungsdaten erfolgreich gespeichert")}catch(e){c.oR.error("Bitte f\xfcllen Sie alle Angaben aus")}},type:"button",style:{background:"#0b5995",color:"white"},className:"btn btn",children:"Speichern"})]}),(0,i.jsx)("br",{}),(0,i.jsx)(c.N9,{})]})]})})},u=o.memo(d)}}]);
//# sourceMappingURL=5703.8c023066.chunk.js.map